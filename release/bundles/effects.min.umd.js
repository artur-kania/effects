!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("rxjs/observable/merge"),require("rxjs/operator/ignoreElements"),require("@ngrx/store"),require("rxjs/Observable"),require("@angular/core"),require("rxjs/Operator"),require("rxjs/operator/filter"),require("rxjs/Observer"),require("rxjs/Subscription")):"function"==typeof define&&define.amd?define(["exports","rxjs/observable/merge","rxjs/operator/ignoreElements","@ngrx/store","rxjs/Observable","@angular/core","rxjs/Operator","rxjs/operator/filter","rxjs/Observer","rxjs/Subscription"],factory):factory((global.ngrx=global.ngrx||{},global.ngrx.effects=global.ngrx.effects||{}),global.Rx.Observable,global.Rx.Observable.prototype,global.ngrx.store,global.Rx,global.ng.core,global.rxjs_Operator,global.Rx.Observable.prototype,global.rxjs_Observer,global.Rx)}(this,function(exports,rxjs_observable_merge,rxjs_operator_ignoreElements,_ngrx_store,rxjs_Observable,_angular_core,rxjs_Operator,rxjs_operator_filter,rxjs_Observer,rxjs_Subscription){"use strict";function Effect(_a){var dispatch=(void 0===_a?{dispatch:!0}:_a).dispatch;return function(target,propertyName){Reflect.hasOwnMetadata(METADATA_KEY,target)||Reflect.defineMetadata(METADATA_KEY,[],target);var effects=Reflect.getOwnMetadata(METADATA_KEY,target),metadata={propertyName:propertyName,dispatch:dispatch};Reflect.defineMetadata(METADATA_KEY,effects.concat([metadata]),target)}}function getEffectsMetadata(instance){var target=Object.getPrototypeOf(instance);return Reflect.hasOwnMetadata(METADATA_KEY,target)?Reflect.getOwnMetadata(METADATA_KEY,target):[]}function mergeEffects(instance){var observables=getEffectsMetadata(instance).map(function(_a){var propertyName=_a.propertyName,dispatch=_a.dispatch,observable="function"==typeof instance[propertyName]?instance[propertyName]():instance[propertyName];return!1===dispatch?rxjs_operator_ignoreElements.ignoreElements.call(observable):observable});return rxjs_observable_merge.merge.apply(void 0,observables)}function runAfterBootstrapEffects(injector,subscription){return function(){var effectInstances=injector.get(afterBootstrapEffects,!1);effectInstances&&subscription.addEffects(effectInstances)}}function toPayload(action){return action.payload}var METADATA_KEY="@ngrx/effects",__extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),Actions=function(_super){function Actions(actionsSubject){var _this=_super.call(this)||this;return _this.source=actionsSubject,_this}return __extends(Actions,_super),Actions.prototype.ofType=function(){for(var keys=[],_i=0;_i<arguments.length;_i++)keys[_i]=arguments[_i];return rxjs_operator_filter.filter.call(this,function(_a){var type=_a.type,len=keys.length;if(1===len)return type===keys[0];for(var i=0;i<len;i++)if(keys[i]===type)return!0;return!1})},Actions.decorators=[{type:_angular_core.Injectable}],Actions.ctorParameters=function(){return[{type:rxjs_Observable.Observable,decorators:[{type:_angular_core.Inject,args:[_ngrx_store.Dispatcher]}]}]},Actions}(rxjs_Observable.Observable),__extends$1=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),effects=new _angular_core.InjectionToken("ngrx/effects: Effects"),EffectsSubscription=function(_super){function EffectsSubscription(store,parent,effectInstances){var _this=_super.call(this)||this;return _this.store=store,_this.parent=parent,Boolean(parent)&&parent.add(_this),Boolean(effectInstances)&&_this.addEffects(effectInstances),_this}return __extends$1(EffectsSubscription,_super),EffectsSubscription.prototype.addEffects=function(effectInstances){var sources=effectInstances.map(mergeEffects),merged=rxjs_observable_merge.merge.apply(void 0,sources);this.add(merged.subscribe(this.store))},EffectsSubscription.prototype.ngOnDestroy=function(){this.closed||this.unsubscribe()},EffectsSubscription.decorators=[{type:_angular_core.Injectable}],EffectsSubscription.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Inject,args:[_ngrx_store.Store]}]},{type:EffectsSubscription,decorators:[{type:_angular_core.Optional},{type:_angular_core.SkipSelf}]},{type:Array,decorators:[{type:_angular_core.Optional},{type:_angular_core.Inject,args:[effects]}]}]},EffectsSubscription}(rxjs_Subscription.Subscription),afterBootstrapEffects=new _angular_core.InjectionToken("ngrx:effects: Bootstrap Effects"),ɵ0=runAfterBootstrapEffects,EffectsModule=function(){function EffectsModule(effectsSubscription){this.effectsSubscription=effectsSubscription}return EffectsModule.run=function(type){return{ngModule:EffectsModule,providers:[EffectsSubscription,type,{provide:effects,useExisting:type,multi:!0}]}},EffectsModule.runAfterBootstrap=function(type){return{ngModule:EffectsModule,providers:[type,{provide:afterBootstrapEffects,useExisting:type,multi:!0}]}},EffectsModule.decorators=[{type:_angular_core.NgModule,args:[{providers:[Actions,EffectsSubscription,{provide:_angular_core.APP_BOOTSTRAP_LISTENER,multi:!0,deps:[_angular_core.Injector,EffectsSubscription],useFactory:ɵ0}]}]}],EffectsModule.ctorParameters=function(){return[{type:EffectsSubscription}]},EffectsModule}();exports.Effect=Effect,exports.mergeEffects=mergeEffects,exports.Actions=Actions,exports.EffectsModule=EffectsModule,exports.EffectsSubscription=EffectsSubscription,exports.toPayload=toPayload,exports.runAfterBootstrapEffects=runAfterBootstrapEffects,Object.defineProperty(exports,"__esModule",{value:!0})});