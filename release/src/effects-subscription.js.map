{"version":3,"file":"effects-subscription.js","sourceRoot":"","sources":["../../src/effects-subscription.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,cAAc,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAClG,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAC5C,OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACzC,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AACjD,OAAO,EAAE,KAAK,EAAE,MAAM,uBAAuB,CAAC;AAC9C,OAAO,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AAGzC,MAAM,CAAC,IAAM,OAAO,GAAG,IAAI,cAAc,CAAM,uBAAuB,CAAC,CAAC;;IAG/B,uCAAY;IACnD,6BACyB,OACQ,QACF;QAH/B,YAKE,iBAAO,SASR;QAbwB,WAAK,GAAL,KAAK;QACG,YAAM,GAAN,MAAM;QAKrC,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACpB,MAAM,CAAC,GAAG,CAAC,KAAI,CAAC,CAAC;SAClB;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YAC7B,KAAI,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;SAClC;;KACF;IAED,wCAAU,GAAV,UAAW,eAAsB;QAC/B,IAAM,OAAO,GAAG,eAAe,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAClD,IAAM,MAAM,GAAG,KAAK,eAAI,OAAO,CAAC,CAAC;QAEjC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;KACxC;IAED,yCAAW,GAAX;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;;gBA7BF,UAAU;;;;gDAGN,MAAM,SAAC,KAAK;gBAFJ,mBAAmB,uBAG3B,QAAQ,YAAI,QAAQ;4CACpB,QAAQ,YAAI,MAAM,SAAC,OAAO;;8BAf/B;EAWyC,YAAY;SAAxC,mBAAmB","sourcesContent":["import { InjectionToken, Inject, SkipSelf, Optional, Injectable, OnDestroy } from '@angular/core';\nimport { Action, Store } from '@ngrx/store';\nimport { Observer } from 'rxjs/Observer';\nimport { Subscription } from 'rxjs/Subscription';\nimport { merge } from 'rxjs/observable/merge';\nimport { mergeEffects } from './effects';\n\n\nexport const effects = new InjectionToken<any>('ngrx/effects: Effects');\n\n@Injectable()\nexport class EffectsSubscription extends Subscription implements OnDestroy {\n  constructor(\n    @Inject(Store) private store: Observer<Action>,\n    @Optional() @SkipSelf() public parent: EffectsSubscription,\n    @Optional() @Inject(effects) effectInstances?: any[]\n  ) {\n    super();\n\n    if (Boolean(parent)) {\n      parent.add(this);\n    }\n\n    if (Boolean(effectInstances)) {\n      this.addEffects(effectInstances);\n    }\n  }\n\n  addEffects(effectInstances: any[]) {\n    const sources = effectInstances.map(mergeEffects);\n    const merged = merge(...sources);\n\n    this.add(merged.subscribe(this.store));\n  }\n\n  ngOnDestroy() {\n    if (!this.closed) {\n      this.unsubscribe();\n    }\n  }\n}\n"]}